(()=>{var j=(t,a)=>()=>(a||(a={exports:{}},t(a.exports,a)),a.exports);var P=j((ct,B)=>{var Z=console.log.bind(console),S={RGBA:1,RGB:3,KA:4,K:5},C={RGBA:1,RGB:3,KA:4,K:5,GRADIENT:2},z={linear:0,radial:1,diamond:2,conic:3,xy:4,sqrtxy:5},U={transform:1<<1,noAlpha:1<<2,hexColors:1<<3,greys:1<<4},N={closed:1<<1,commands:1<<2,points:1<<3},O={CURVE:3,LINE:2,HLINE:1,VLINE:0},R={matrix:1<<1,hinting:1<<2,lodScale:1<<3,transformers:1<<4,translate:1<<5},G={AFFINE:20,CONTOUR:21,PERSPECTIVE:22,STROKE:23},Q={miter:0,miterRevert:1,round:2,bevel:3,miterRound:4},W={butt:0,square:1,round:2};function F(t,a=null){let n=0;return d();function d(){let[r,e,o,s]=t;if(r!==110||e!==99||o!==105||s!==102)throw new Error("not a hvif file");n=4;let c=w(t[n++],E),h=w(t[n++],T),i=w(t[n++],u);if(n!==t.length)throw new Error("Additional padding after hvif file");return{filename:a,styles:c,paths:h,shapes:i}}function w(r,e){let o=[];for(;r>0;r--)o.push(e());return o}function E(){let r=t[n++];return r===C.GRADIENT?x():l(r)}function T(){let[r,e]=t.slice(n,n+=2),o=!!(r&N.closed);if(r&N.points){let s=p(e*2);return{type:"points",points:s,closed:o}}else if(r&N.commands){let s=f(e);return{type:"curves",points:s,closed:o}}else{let s=p(e*6);return{type:"curves",points:s,closed:o}}}function u(){let r=n,[e,o,s]=t.slice(n,n+=3);if(e!==10)throw new Error("readShape: unkown path tag: "+e);let c=[...t.slice(n,n+=s)],h=t[n++],i={tag:e,styleIndex:o,pathIndices:c};if(h&R.matrix?(i.transform=v(),i.transform._tag="matrix"):h&R.translate&&(i.transform=p(2),i.transform._tag="translate"),h&R.lodScale){let[y,b]=t.slice(n,n+=2);y=y/63.75,b=b/63.75}if(h&R.transformers){let y=t[n++];i.transformers=m(y)}return i}function m(r){let e=[];for(;r>0;r--){let o=t[n++];switch(o){case G.AFFINE:let s=v();throw new Error("TODO read affine transformer");case G.CONTOUR:{let[c,h,i]=t.slice(n,n+=3);e.push({tag:o,_tag:"contour",width:(c-128)*102,lineJoin:h,miterLimit:i})}break;case G.STROKE:{let[c,h,i]=t.slice(n,n+=3),y=h&15,b=h>>4;e.push({tag:o,_tag:"stroke",width:(c-128)*102,lineJoin:y,lineCap:b,miterLimit:i})}break;default:return Z("unknown transformer tag: "+o+" @ "+n),e}}return e}function l(r){if(r!==2&&r<=5){let e=[0,4,0,3,2,1];return[r,...t.slice(n,n+=e[r])]}else throw new Error(`unknown color format: ${r}`)}function x(){let[r,e,o]=t.slice(n,n+=3),{greys:s,noAlpha:c}=U,h=e&s?e&c?S.K:S.KA:e&c?S.RGB:S.RGBA,i=e&U.transform?v():null,y=g(o,h);return{tag:C.GRADIENT,type:r,matrix:i,stops:y}}function g(r,e){let o=[];for(;r>0;r--){let s=t[n++],c=l(e);o.push({offset:s,color:c})}return o.sort((s,c)=>s.offset<c.offset?-1:s.offset>c.offset?1:0),o}function f(r){let e=Math.ceil(r/4),o=t.slice(n,n+=e),s=X(o),c=[],h=[0,0,0,0,0,0],i=[0,0,0,0,0,0];for(let y=0;y<r;y++)switch(s[y]){case O.VLINE:i[0]=i[2]=i[4]=p(1)[0],c.push(...i);break;case O.HLINE:i[1]=i[3]=i[5]=p(1)[0],c.push(...i);break;case O.LINE:i[0]=i[2]=i[4]=p(1)[0],i[1]=i[3]=i[5]=p(1)[0],c.push(...i);break;case O.CURVE:i=p(6),c.push(...i);break;default:throw new Error("Unknown Point-type")}return c}function v(){let r=[];for(let e=0;e<6;e++)r.push(Y(t.slice(n,n+=3)));return r}function p(r){let e=[];for(;r>0;r--){let o=t[n++];o>=128?(o=((o&127)<<8)+t[n++],e.push(o-128*102)):e.push(o*102-32*102)}return e}}function X(t){let a=[];for(let n=0;n<t.length;n++){let d=t[n];a.push(d&3,d>>2&3,d>>4&3,d>>6&3)}return a}function Y([t,a,n]){let d=new DataView(new ArrayBuffer(4)),w=t<<16|a<<8|n,E=(w&8388608)>>>23,T=((w&8257536)>>>17)-32,u=(w&131071)<<6,m=E<<31|T+127<<23|u;return d.setUint32(0,m),d.getFloat32(0)}var tt={colorTags:S,colourTags:S,styleTags:C,gradientTypes:z,lineCaps:W,lineJoins:Q};B.exports={constants:tt,parseIcon:F,parse:F}});var J=j((lt,K)=>{var{setPrototypeOf:nt,entries:et}=Object,at=console.log.bind(console),{colorTags:L,gradientTypes:I}=P().constants;function _([t,...a]){return(t===L.KA||t===L.K)&&a.unshift(a[0],a[0]),"#"+a.map(n=>n.toString(16).padStart(2,"0")).join("")}function rt(t){return t.tag===2?D(t):_(t)}function D({type:t,stops:a}){let n=a.map(({color:d,offset:w})=>_(d)+" "+w/2.55+"%");return t!==I.linear&&t!==I.radial&&console.warn("Rendering a",["linear","radial","diamond","conic","xy","sqrtxy"][t],"gradient as a radial gradient instead."),t===I.linear?`linear-gradient(to right, ${n.join(", ")})`:`radial-gradient(circle at center, ${n.join(", ")})`}function A(t){return`stroke-width:${t.width};stroke-linejoin:${["miter","miter","round","bevel","miter"][t.lineJoin]};stroke-linecap:${["butt","square","round"][t.lineCap]};`}function q([t,a,n,d,w,E]){return`matrix(${[t,a,n,d,w*102,E*102].join(" ")})`}function V(t){return t._tag!=="matrix"?`${t._tag}(${[...t].join(" ")})`:q(t)}function H(...t){return[...M(t)].join(" ")}function*M(t){for(let u=t.length-1;u>=0;u--){let{type:m,points:l,closed:x}=t[u];if(m==="points"){yield*["M",l[0],l[1],"L"];for(let g=2,f=l.length;g<f;g++)yield l[g];x&&(yield"Z")}else if(m==="curves"){var[a,n,d,w,E,T]=l.slice(0,6);yield*["M",a,n];for(let g=0,f=l.length;g<f;){yield*["C",E,T];let[v,p,r,e,o,s]=l.slice(g,g+=6);E=o,T=s,yield*[r,e,v,p]}x&&(yield*[E,T,d,w,a,n,"Z"])}}}function st(){return(Math.random()*2e16>>>0).toString(36)}function k(t,a){for(let[n,d]of et(a))t.setAttribute(n,d);return t}function ot(t){let a=d("http://www.w3.org/1999/xhtml"),n=d("http://www.w3.org/2000/svg");return{renderIcon:w,renderShape:E,renderGradient:T};function d(u){return(m,...l)=>{let x=m.split("."),g=t(u,x.shift()||"g");return x.length&&g.setAttribute("class",x.join(" ")),g.append(...l),g}}function w(u,m=st()){let l=n("svg"),x=a("span.haikon",l);return k(l,{id:m,viewBox:"0 0 6528 6528",style:"width:2em; height:2em; transform:translate(0, .45em);"}),u.shapes.forEach((f,v)=>l.append(E(f,u,m))),x}function E(u,m,l){if(l==null)throw new Error("id is null");let x=u.pathIndices.map(s=>m.paths[s]),g=H(...x),f=n("path");k(f,{d:g}),u.transform&&k(f,{transform:V(u.transform)});let v=u.transformers||[];v.length>1&&console.warn("#"+l,"("+m.filename+")","TODO: support multiple effects;",v.map(s=>s._tag?s._tag:"fill"));let p={_tag:"fill"};for(let s of u.transformers||[])(s._tag==="stroke"||s._tag==="contour")&&(p=s);let r=m.styles[u.styleIndex],e=null,o="";if(r.tag==2){let s=l+"-g"+u.styleIndex.toString(16);e=T(r,s),o=`url(#${s})`}else o=_(r);if(p._tag==="stroke"){let s=A(p)+`stroke:${o};fill:none;`;if(k(f,{style:s}),e){let c=n("g");return c.append(e,f),c}else return f}else if(p._tag==="fill"){let s=A(p)+`fill:${o};stroke:none;`;if(k(f,{style:s}),e){let c=n("g");return c.append(e,f),c}else return f}else if(p._tag==="contour"){if(p.width<0){let y=nt({width:-p.width},p);style=A(y)+"stroke:black;fill:white;"}else style=A(p)+"stroke:white;fill:white;";k(f,{style});let s=n("mask"),c=l+"-m"+u.styleIndex.toString(16);k(s,{id:c,maskUnits:"userSpaceOnUse",x:0,y:0,width:6528,height:6528}),s.append(f);let h=n("g"),i=n("rect");return k(i,{x:0,y:0,width:6528,height:6528,fill:o,mask:`url(#${c})`}),h.append(s,i),e&&h.append(e),h}}function T({type:u,stops:m,matrix:l},x){let g=u===I.linear?"linearGradient":"radialGradient",f=n(g);if(k(f,{id:x,gradientUnits:"userSpaceOnUse"}),l&&k(f,{gradientTransform:q(l)}),u!==I.linear)k(f,{cx:0,cy:0,r:64*102});else{var v=-64*102,p=64*102,r=-64*102,e=-64*102;k(f,{x1:v,x2:p,y1:r,y2:e})}for(let{color:o,offset:s}of m){let c=n("stop");k(c,{offset:s/2.55+"%","stop-color":_(o)}),f.append(c)}return f}}K.exports={colorCss:_,styleCss:rt,gradientCss:D,printTransform:V,printPath:H,_renderPaths:M,_renderers:ot}});var $;globalThis.Haikon=P();globalThis.HaikonSvg=$=J();Object.assign($,$._renderers(document.createElementNS.bind(document)));})();
